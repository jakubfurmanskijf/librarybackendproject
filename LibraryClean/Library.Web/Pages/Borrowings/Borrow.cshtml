@page
@model Library.Web.Pages.Borrowings.BorrowModel
@attribute [Microsoft.AspNetCore.Authorization.Authorize(Roles = "Admin")]

<h2>Borrow a book</h2>

<form method="post">
    <div>
        <label for="MemberId">Member</label>
        <select asp-for="MemberId" asp-items="Model.MemberOptions"></select>
    </div>

    <div>
        <label for="BookId">Book</label>
        <select asp-for="BookId" asp-items="Model.BookOptions"></select>
        @if (Model.BookOptions.Count == 0)
        {
            <div><em>No books available to borrow right now.</em></div>
        }
    </div>

    <div>
        <label>Days</label>
        <input asp-for="Days" type="number" value="14" />
    </div>

    <button type="submit" @(Model.BookOptions.Count == 0 ? "disabled" : null)>Borrow</button>
    <a asp-page="/Borrowings/Index">Cancel</a>
</form>

@if (!string.IsNullOrEmpty(Model.Message))
{
    <p>@Model.Message</p>
}
@if (!string.IsNullOrEmpty(Model.Error))
{
    <p style="color:red">@Model.Error</p>
}
